(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{387:function(e,t,i){var o=i(424);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,i(15).default)("993312f6",o,!0,{})},422:function(E,F,e){"use strict";(function(e,t){var i;function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(i,r){if(!i)throw"First parameter is required.";r=new g(i,r=r||{type:"video"});var n=this;function t(e){e&&(r.initCallback=function(){e(),e=r.initCallback=null});var t=new p(i,r);(u=new t(i,r)).record(),c("recording"),r.disableLogs||console.log("Initialized recorderType:",u.constructor.name,"for output-type:",r.type)}function a(o){if(o=o||function(){},u){if("paused"===n.state)return n.resumeRecording(),void setTimeout(function(){a(o)},1);"recording"===n.state||r.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),r.disableLogs||console.log("Stopped recording "+r.type+" stream."),"gif"!==r.type?u.stop(e):(u.stop(),e()),c("stopped")}else l();function e(e){if(u){Object.keys(u).forEach(function(e){"function"!=typeof u[e]&&(n[e]=u[e])});var t=u.blob;if(!t){if(!e)throw"Recording failed.";u.blob=t=e}if(t&&!r.disableLogs&&console.log(t.type,"->",y(t.size)),o){var i;try{i=C.createObjectURL(t)}catch(e){}"function"==typeof o.call?o.call(n,i):o(i)}r.autoWriteToDisk&&s(function(e){var t={};t[r.type+"Blob"]=e,U.Store(t)})}else"function"==typeof o.call?o.call(n,""):o("")}}function d(e){postMessage((new FileReaderSync).readAsDataURL(e))}function s(t,e){if(!t)throw"Pass a callback function over getDataURL.";var i=e?e.blob:(u||{}).blob;if(!i)return r.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){s(t,e)},1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var o=new FileReader;o.readAsDataURL(i),o.onload=function(e){t(e.target.result)}}else{var n=function(e){try{var t=C.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return C.revokeObjectURL(t),i}catch(e){}}(d);n.onmessage=function(e){t(e.data)},n.postMessage(i)}}function o(e){e=e||0,"paused"!==n.state?"stopped"!==n.state&&(e>=n.recordingDuration?a(n.onRecordingStopped):(e+=1e3,setTimeout(function(){o(e)},1e3))):setTimeout(function(){o(e)},1e3)}function c(e){n&&(n.state=e,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var u,e='It seems that recorder is destroyed or "startRecording" is not invoked for '+r.type+" recorder.";function l(){!0!==r.disableLogs&&console.warn(e)}var f={startRecording:function(e){return e&&(r=new g(i,e)),r.disableLogs||console.log("started recording "+r.type+" stream."),u?(u.clearRecordedData(),u.record(),c("recording"),n.recordingDuration&&o()):t(function(){n.recordingDuration&&o()}),n},stopRecording:a,pauseRecording:function(){u?"recording"===n.state?(c("paused"),u.pause(),r.disableLogs||console.log("Paused recording.")):r.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):l()},resumeRecording:function(){u?"paused"===n.state?(c("recording"),u.resume(),r.disableLogs||console.log("Resumed recording.")):r.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):l()},initRecorder:t,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){u?(u.clearRecordedData(),r.disableLogs||console.log("Cleared old recorded data.")):l()},getBlob:function(){if(u)return u.blob;l()},getDataURL:s,toURL:function(){if(u)return C.createObjectURL(u.blob);l()},getInternalRecorder:function(){return u},save:function(e){u?function(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var i=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var o=t.split(".");t=o[0],i=o[1]}var n=(t||Math.round(9999999999*Math.random())+888888888)+"."+i;{if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,n);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,n)}var r=document.createElement("a");r.href=C.createObjectURL(e),r.download=n,r.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(r),"function"==typeof r.click?r.click():(r.target="_blank",r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})));C.revokeObjectURL(r.href)}(u.blob,e):l()},getFromDisk:function(e){u?m.getFromDisk(r.type,e):l()},setAdvertisementArray:function(e){r.advertisement=[];for(var t=e.length,i=0;i<t;i++)r.advertisement.push({duration:i,image:e[i]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){u&&"function"==typeof u.clearRecordedData&&u.clearRecordedData(),u=null,c("inactive"),n.blob=null},onStateChanged:function(e){r.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return n.state},destroy:function(){var e=r.disableLogs;r={disableLogs:!0},n.reset(),c("destroyed"),f=n=null,S.AudioContextConstructor&&(S.AudioContextConstructor.close(),S.AudioContextConstructor=null),r.disableLogs=e,r.disableLogs||console.warn("RecordRTC is destroyed.")},version:"5.5.4"};if(!this)return n=f;for(var h in f)this[h]=f[h];return n=this,f}function g(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===A||t.recorderType===M||void 0!==I&&t.recorderType===I?t.type="video":t.recorderType===x?t.type="gif":t.recorderType===L?t.type="audio":t.recorderType===k&&(T(e,"audio").length&&T(e,"video").length?t.type="video":!T(e,"audio").length&&T(e,"video").length?t.type="video":T(e,"audio").length&&!T(e,"video").length&&(t.type="audio"))),void 0!==k&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function p(e,t){var i;return(u||d||s)&&(i=L),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!u&&(i=k),"video"===t.type&&(u||s)&&(i=A,void 0!==I&&"undefined"!=typeof ReadableStream&&(i=I)),"gif"===t.type&&(i=x),"canvas"===t.type&&(i=M),f()&&i!==M&&i!==x&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(T(e,"video").length||T(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(i=k):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(i=k)),e instanceof Array&&e.length&&(i=O),t.recorderType&&(i=t.recorderType),!t.disableLogs&&i&&i.name&&console.log("Using recorderType:",i.name||i.constructor.name),!i&&l&&(i=k),i}function o(d){this.addStream=function(e){e&&(d=e)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var e,t=this.mediaType,i=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof t.audio&&f()&&!T(d,"audio").length&&(t.audio=!1),"function"!=typeof t.video&&f()&&!T(d,"video").length&&(t.video=!1),"function"!=typeof t.gif&&f()&&!T(d,"video").length&&(t.gif=!1),!t.audio&&!t.video&&!t.gif)throw"MediaStream must have either audio or video tracks.";if(t.audio&&(e=null,"function"==typeof t.audio&&(e=t.audio),this.audioRecorder=new m(d,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:e,mimeType:i.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),t.video||this.audioRecorder.startRecording()),t.video){e=null,"function"==typeof t.video&&(e=t.video);var o=d;if(f()&&t.audio&&"function"==typeof t.audio){var n=T(d,"video")[0];c?((o=new w).addTrack(n),e&&e===A&&(e=k)):(o=new w).addTrack(n)}this.videoRecorder=new m(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:e,mimeType:i.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),t.audio||this.videoRecorder.startRecording()}if(t.audio&&t.video){var r=this,a=!0===f();t.audio instanceof L&&t.video?a=!1:!0!==t.audio&&!0!==t.video&&t.audio!==t.video&&(a=!1),!0===a?(r.audioRecorder=null,r.videoRecorder.startRecording()):r.videoRecorder.initRecorder(function(){r.audioRecorder.initRecorder(function(){r.videoRecorder.startRecording(),r.audioRecorder.startRecording()})})}t.gif&&(e=null,"function"==typeof t.gif&&(e=t.gif),this.gifRecorder=new m(d,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:e,mimeType:i.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(t){t=t||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(e){t(e,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(e){t(e,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(e){t(e,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(i){function o(e,t){if("undefined"!=typeof Worker){var i=function(e){var t,i=C.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(i);if(void 0!==C)t=C;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(i),o}(function(e){postMessage((new FileReaderSync).readAsDataURL(e))});i.onmessage=function(e){t(e.data)},i.postMessage(e)}else{var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){t(e.target.result)}}}this.getBlob(function(e){e.audio&&e.video?o(e.audio,function(t){o(e.video,function(e){i({audio:t,video:e})})}):e.audio?o(e.audio,function(e){i({audio:e})}):e.video&&o(e.video,function(e){i({video:e})})})},this.writeToDisk=function(){m.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}m.version="5.5.4",E.exports=m,void 0===(i=function(){return m}.apply(F,[]))||(E.exports=i),m.getFromDisk=function(i,o){if(!o)throw"callback is mandatory.";console.log("Getting recorded "+("all"===i?"blobs":i+" blob ")+" from disk!"),U.Fetch(function(e,t){"all"!==i&&t===i+"Blob"&&o&&o(e),"all"===i&&o&&o(e,t.replace("Blob",""))})},m.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL(function(i){e.video.getDataURL(function(t){e.gif.getDataURL(function(e){U.Store({audioBlob:i,videoBlob:t,gifBlob:e})})})}):e.audio&&e.video?e.audio.getDataURL(function(t){e.video.getDataURL(function(e){U.Store({audioBlob:t,videoBlob:e})})}):e.audio&&e.gif?e.audio.getDataURL(function(t){e.gif.getDataURL(function(e){U.Store({audioBlob:t,gifBlob:e})})}):e.video&&e.gif?e.video.getDataURL(function(t){e.gif.getDataURL(function(e){U.Store({videoBlob:t,gifBlob:e})})}):e.audio?e.audio.getDataURL(function(e){U.Store({audioBlob:e})}):e.video?e.video.getDataURL(function(e){U.Store({videoBlob:e})}):e.gif&&e.gif.getDataURL(function(e){U.Store({gifBlob:e})})},o.getFromDisk=m.getFromDisk,o.writeToDisk=m.writeToDisk,void 0!==m&&(m.MRecordRTC=o);var n;(n=void 0!==e?e:null)&&"undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},e.console||(e.console={}),void 0!==e.console.log&&void 0!==e.console.error||(e.console.error=e.console.log=e.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(n.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},n.HTMLVideoElement=function(){}),"undefined"==typeof location&&(n.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(n.screen={width:0,height:0}),void 0===C&&(n.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),n.window=e);var v=window.requestAnimationFrame;if(void 0===v)if("undefined"!=typeof webkitRequestAnimationFrame)v=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)v=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)v=msRequestAnimationFrame;else if(void 0===v){var r=0;v=function(e,t){var i=(new Date).getTime(),o=Math.max(0,16-(i-r)),n=setTimeout(function(){e(i+o)},o);return r=i+o,n}}var b=window.cancelAnimationFrame;void 0===b&&("undefined"!=typeof webkitCancelAnimationFrame?b=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?b=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?b=msCancelAnimationFrame:void 0===b&&(b=function(e){clearTimeout(e)}));var a=window.AudioContext;void 0===a&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(a=mozAudioContext));var C=window.URL;void 0===C&&"undefined"!=typeof webkitURL&&(C=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var d=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),s=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),c=-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&"netscape"in window&&/ rv:/.test(navigator.userAgent),u=!s&&!d&&!!navigator.webkitGetUserMedia||function(){if("undefined"!=typeof window&&"object"===h(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===h(t.versions)&&t.versions.electron)return!0;if("object"===("undefined"==typeof navigator?"undefined":h(navigator))&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron"))return!0;return!1}()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);l&&!u&&-1!==navigator.userAgent.indexOf("CriOS")&&(u=!(l=!1));var w=window.MediaStream;function y(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function T(e,t){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(t||"audio")}):[]}function R(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0===w&&"undefined"!=typeof webkitMediaStream&&(w=webkitMediaStream),void 0!==w&&void 0===w.prototype.stop&&(w.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})});var S={};function f(){if(c||l||d)return!0;navigator.appVersion;var e,t,i=navigator.userAgent,o=""+parseFloat(navigator.appVersion),n=parseInt(navigator.appVersion,10);return(u||s)&&(e=i.indexOf("Chrome"),o=i.substring(e+7)),-1!==(t=o.indexOf(";"))&&(o=o.substring(0,t)),-1!==(t=o.indexOf(" "))&&(o=o.substring(0,t)),n=parseInt(""+o,10),isNaN(n)&&(o=""+parseFloat(navigator.appVersion),n=parseInt(navigator.appVersion,10)),49<=n}function k(t,o){var n=this;if(void 0===t)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not supports Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(o=o||{mimeType:"video/webm"}).type){var e;if(T(t,"video").length&&T(t,"audio").length)navigator.mozGetUserMedia?(e=new w).addTrack(T(t,"audio")[0]):e=new w(T(t,"audio")),t=e;o.mimeType&&-1!==o.mimeType.toString().toLowerCase().indexOf("audio")||(o.mimeType=u?"audio/webm":"audio/ogg"),o.mimeType&&"audio/ogg"!==o.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(o.mimeType="audio/ogg")}var r,a=[];function d(){n.timestamps.push((new Date).getTime()),"function"==typeof o.onTimeStamp&&o.onTimeStamp(n.timestamps[n.timestamps.length-1],n.timestamps)}function s(e){return r&&r.mimeType?r.mimeType:e.mimeType||"video/webm"}function i(){a=[],r=null,n.timestamps=[]}this.getArrayOfBlobs=function(){return a},this.record=function(){n.blob=null,n.clearRecordedData(),n.timestamps=[],c=[],a=[];var i=o;o.disableLogs||console.log("Passing following config over MediaRecorder API.",i),r&&(r=null),u&&!f()&&(i="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&i.mimeType&&(MediaRecorder.isTypeSupported(i.mimeType)||(o.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType),i.mimeType="audio"===o.type?"audio/webm":"video/webm"));try{r=new MediaRecorder(t,i),o.mimeType=i.mimeType}catch(e){r=new MediaRecorder(t)}i.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in r&&!1===r.canRecordMimeType(i.mimeType)&&(o.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType)),r.ondataavailable=function(e){if(e.data&&c.push("ondataavailable: "+y(e.data.size)),"number"!=typeof o.timeSlice)!e.data||!e.data.size||e.data.size<100||n.blob?n.recordingCallback&&(n.recordingCallback(new Blob([],{type:s(i)})),n.recordingCallback=null):(n.blob=o.getNativeBlob?e.data:new Blob([e.data],{type:s(i)}),n.recordingCallback&&(n.recordingCallback(n.blob),n.recordingCallback=null));else if(e.data&&e.data.size&&100<e.data.size&&(a.push(e.data),d(),"function"==typeof o.ondataavailable)){var t=o.getNativeBlob?e.data:new Blob([e.data],{type:s(i)});o.ondataavailable(t)}},r.onstart=function(){c.push("started")},r.onpause=function(){c.push("paused")},r.onresume=function(){c.push("resumed")},r.onstop=function(){c.push("stopped")},r.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),o.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",i.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!n.manuallyStopped&&r&&"inactive"===r.state)return delete o.timeslice,r.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==r.state&&"stopped"!==r.state&&r.stop())},"number"==typeof o.timeSlice?(d(),r.start(o.timeSlice)):r.start(36e5),o.initCallback&&o.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},n.manuallyStopped=!0,r&&(this.recordingCallback=e,"recording"===r.state&&r.stop(),"number"==typeof o.timeSlice&&setTimeout(function(){n.blob=new Blob(a,{type:s(o)}),n.recordingCallback(n.blob)},100))},this.pause=function(){r&&"recording"===r.state&&r.pause()},this.resume=function(){r&&"paused"===r.state&&r.resume()},this.clearRecordedData=function(){r&&"recording"===r.state&&n.stop(i),i()},this.getInternalRecorder=function(){return r},this.blob=null,this.getState=function(){return r&&r.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===o.checkForInactiveTracks&&(o.checkForInactiveTracks=!1);n=this;!function e(){if(r&&!1!==o.checkForInactiveTracks)return!1===function(){if("active"in t){if(!t.active)return!1}else if("ended"in t&&t.ended)return!1;return!0}()?(o.disableLogs||console.log("MediaStream seems stopped."),void n.stop()):void setTimeout(e,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function L(e,r){if(!T(e,"audio").length)throw"Your stream has no audio tracks.";var a,d=this,s=[],c=[],u=!1,l=0,f=2,o=(r=r||{}).desiredSampRate;function h(){if(!1===r.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function t(e,t){function i(e,t){var i,o=e.numberOfAudioChannels,n=e.leftBuffers.slice(0),r=e.rightBuffers.slice(0),a=e.sampleRate,d=e.internalInterleavedLength,s=e.desiredSampRate;function c(e,t,i){var o,n,r=Math.round(e.length*(t/i)),a=[],d=Number((e.length-1)/(r-1));a[0]=e[0];for(var s=1;s<r-1;s++){var c=s*d,u=Number(Math.floor(c)).toFixed(),l=Number(Math.ceil(c)).toFixed(),f=c-u;a[s]=(o=e[u],n=e[l],o+(n-o)*f)}return a[r-1]=e[e.length-1],a}function u(e,t){for(var i=new Float64Array(t),o=0,n=e.length,r=0;r<n;r++){var a=e[r];i.set(a,o),o+=a.length}return i}function l(e,t,i){for(var o=i.length,n=0;n<o;n++)e.setUint8(t+n,i.charCodeAt(n))}2===o&&(n=u(n,d),r=u(r,d),s&&(n=c(n,s,a),r=c(r,s,a))),1===o&&(n=u(n,d),s&&(n=c(n,s,a))),s&&(a=s),2===o&&(i=function(e,t){for(var i=e.length+t.length,o=new Float64Array(i),n=0,r=0;r<i;)o[r++]=e[n],o[r++]=t[n],n++;return o}(n,r)),1===o&&(i=n);var f=i.length,h=new ArrayBuffer(44+2*f),m=new DataView(h);l(m,0,"RIFF"),m.setUint32(4,36+2*f,!0),l(m,8,"WAVE"),l(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,o,!0),m.setUint32(24,a,!0),m.setUint32(28,2*a,!0),m.setUint16(32,2*o,!0),m.setUint16(34,16,!0),l(m,36,"data"),m.setUint32(40,2*f,!0);for(var g=f,p=44,v=0;v<g;v++)m.setInt16(p,32767*i[v],!0),p+=2;if(t)return t({buffer:h,view:m});postMessage({buffer:h,view:m})}if(e.noWorker)i(e,function(e){t(e.buffer,e.view)});else{var o,n,r,a=(o=i,n=C.createObjectURL(new Blob([o.toString(),";this.onmessage =  function (eee) {"+o.name+"(eee.data);}"],{type:"application/javascript"})),(r=new Worker(n)).workerURL=n,r);a.onmessage=function(e){t(e.data.buffer,e.data.view),C.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(e)}}if(!0===r.leftChannel&&(f=1),1===r.numberOfAudioChannels&&(f=1),(!f||f<1)&&(f=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+f),void 0===r.checkForInactiveTracks&&(r.checkForInactiveTracks=!0),this.record=function(){if(!1===h())throw"Please make sure MediaStream is active.";w(),R=b=!1,u=!0,void 0!==r.timeSlice&&k()},this.stop=function(i){i=i||function(){},u=!1,t({desiredSampRate:o,sampleRate:v,numberOfAudioChannels:f,internalInterleavedLength:l,leftBuffers:s,rightBuffers:1===f?[]:c,noWorker:r.noWorker},function(e,t){d.blob=new Blob([t],{type:"audio/wav"}),d.buffer=new ArrayBuffer(t.buffer.byteLength),d.view=t,d.sampleRate=o||v,d.bufferSize=p,d.length=l,R=!1,i&&i(d.blob)})},void 0===i)var i={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext};i.AudioContextConstructor||(i.AudioContextConstructor=new i.AudioContext);var n=i.AudioContextConstructor,m=n.createMediaStreamSource(e),g=[0,256,512,1024,2048,4096,8192,16384],p=void 0===r.bufferSize?4096:r.bufferSize;if(-1===g.indexOf(p)&&(r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(g,null,"\t"))),n.createJavaScriptNode)a=n.createJavaScriptNode(p,f,f);else{if(!n.createScriptProcessor)throw"WebAudio API has no support on this browser.";a=n.createScriptProcessor(p,f,f)}m.connect(a),r.bufferSize||(p=a.bufferSize);var v=void 0!==r.sampleRate?r.sampleRate:n.sampleRate||44100;(v<22050||96e3<v)&&(r.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate);var b=!1;function w(){s=[],l=0,b=u=R=!(c=[]),n=null,d.leftchannel=s,d.rightchannel=c,d.numberOfAudioChannels=f,d.desiredSampRate=o,d.sampleRate=v,d.recordingLength=l,S={left:[],right:[],recordingLength:0}}function y(){a&&(a.onaudioprocess=null,a.disconnect(),a=null),m&&(m.disconnect(),m=null),w()}this.pause=function(){b=!0},this.resume=function(){if(!1===h())throw"Please make sure MediaStream is active.";if(!u)return r.disableLogs||console.log("Seems recording has been restarted."),void this.record();b=!1},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,u&&this.stop(y),y()},this.name="StereoAudioRecorder";var R=!(this.toString=function(){return this.name});a.onaudioprocess=function(e){if(!b)if(!1===h()&&(r.disableLogs||console.log("MediaStream seems stopped."),a.disconnect(),u=!1),u){R||(R=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback());var t=e.inputBuffer.getChannelData(0),i=new Float32Array(t);if(s.push(i),2===f){var o=e.inputBuffer.getChannelData(1),n=new Float32Array(o);c.push(n)}l+=p,d.recordingLength=l,void 0!==r.timeSlice&&(S.recordingLength+=p,S.left.push(i),2===f&&S.right.push(n))}else m&&(m.disconnect(),m=null)},n.createMediaStreamDestination?a.connect(n.createMediaStreamDestination()):a.connect(n.destination),this.leftchannel=s,this.rightchannel=c,this.numberOfAudioChannels=f,this.desiredSampRate=o,this.sampleRate=v,d.recordingLength=l;var S={left:[],right:[],recordingLength:0};function k(){u&&"function"==typeof r.ondataavailable&&void 0!==r.timeSlice&&(S.left.length?(t({desiredSampRate:o,sampleRate:v,numberOfAudioChannels:f,internalInterleavedLength:S.recordingLength,leftBuffers:S.left,rightBuffers:1===f?[]:S.right},function(e,t){var i=new Blob([t],{type:"audio/wav"});r.ondataavailable(i),setTimeout(k,r.timeSlice)}),S={left:[],right:[],recordingLength:0}):setTimeout(k,r.timeSlice))}}function M(o,r){if("undefined"==typeof html2canvas)throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";(r=r||{}).frameInterval||(r.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){e in document.createElement("canvas")&&(n=!0)});var i,a,d,e=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),t=50,s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(e&&s&&s[2]&&(t=parseInt(s[2],10)),e&&t<52&&(n=!1),r.useWhammyRecorder&&(n=!1),n)if(r.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),o instanceof HTMLCanvasElement)i=o;else{if(!(o instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";i=o.canvas}else navigator.mozGetUserMedia&&(r.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(d=!0,n&&!r.useWhammyRecorder){var e;"captureStream"in i?e=i.captureStream(25):"mozCaptureStream"in i?e=i.mozCaptureStream(25):"webkitCaptureStream"in i&&(e=i.webkitCaptureStream(25));try{var t=new w;t.addTrack(T(e,"video")[0]),e=t}catch(e){}if(!e)throw"captureStream API are NOT available.";(a=new k(e,{mimeType:r.mimeType||"video/webm"})).record()}else h.frames=[],f=(new Date).getTime(),l();r.initCallback&&r.initCallback()},this.getWebPImages=function(e){if("canvas"===o.nodeName.toLowerCase()){var n=h.frames.length;h.frames.forEach(function(e,t){var i=n-t;r.disableLogs||console.log(i+"/"+n+" frames remaining"),r.onEncodingCallback&&r.onEncodingCallback(i,n);var o=e.image.toDataURL("image/webp",1);h.frames[t].image=o}),r.disableLogs||console.log("Generating WebM"),e()}else e()};var c=!(this.stop=function(t){d=!1;var i=this;n&&a?a.stop(t):this.getWebPImages(function(){h.compile(function(e){r.disableLogs||console.log("Recording finished!"),i.blob=e,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),t&&t(i.blob),h.frames=[]})})});function u(){h.frames=[],c=d=!1}function l(){if(c)return f=(new Date).getTime(),setTimeout(l,500);if("canvas"===o.nodeName.toLowerCase()){var e=(new Date).getTime()-f;return f=(new Date).getTime(),h.frames.push({image:(t=document.createElement("canvas"),i=t.getContext("2d"),t.width=o.width,t.height=o.height,i.drawImage(o,0,0),t),duration:e}),void(d&&setTimeout(l,r.frameInterval))}var t,i;html2canvas(o,{grabMouse:void 0===r.showMousePointer||r.showMousePointer,onrendered:function(e){var t=(new Date).getTime()-f;if(!t)return setTimeout(l,r.frameInterval);f=(new Date).getTime(),h.frames.push({image:e.toDataURL("image/webp",1),duration:t}),d&&setTimeout(l,r.frameInterval)}})}this.pause=function(){c=!0,a instanceof k&&a.pause()},this.resume=function(){c=!1,a instanceof k?a.resume():d||this.record()},this.clearRecordedData=function(){d&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var f=(new Date).getTime(),h=new D.Video(100)}function A(e,o){function i(e){e=void 0!==e?e:10;var t=(new Date).getTime()-s;return t?a?(s=(new Date).getTime(),setTimeout(i,100)):(s=(new Date).getTime(),d.paused&&d.play(),u.drawImage(d,0,0,y.width,y.height),c.frames.push({duration:t,image:y.toDataURL("image/webp")}),void(r||setTimeout(i,e,e))):setTimeout(i,e,e)}function n(i,e,t,o,n){var r=document.createElement("canvas");r.width=y.width,r.height=y.height;var a,d,s,u=r.getContext("2d"),l=[],f=-1===e,c=e&&0<e&&e<=i.length?e:i.length,h=0,m=0,g=0,p=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),v=t&&0<=t&&t<=1?t:0,b=o&&0<=o&&o<=1?o:0,w=!1;d=-1,s=(a={length:c,functionToLoop:function(e,t){var r,a,d,s=function(){!w&&d-r<=d*b||(f&&(w=!0),l.push(i[t])),e()};if(w)s();else{var c=new Image;c.onload=function(){u.drawImage(c,0,0,y.width,y.height);var e=u.getImageData(0,0,y.width,y.height);r=0,a=e.data.length,d=e.data.length/4;for(var t=0;t<a;t+=4){var i=e.data[t],o=e.data[t+1],n=e.data[t+2];Math.sqrt(Math.pow(i-h,2)+Math.pow(o-m,2)+Math.pow(n-g,2))<=p*v&&r++}s()},c.src=i[t].image}},callback:function(){(l=l.concat(i.slice(c))).length<=0&&l.push(i[i.length-1]),n(l)}}).length,function e(){++d!==s?setTimeout(function(){a.functionToLoop(e,d)},1):a.callback()}()}(o=o||{}).frameInterval||(o.frameInterval=10),o.disableLogs||console.log("Using frames-interval:",o.frameInterval);var r=!(this.record=function(){o.width||(o.width=320),o.height||(o.height=240),o.video||(o.video={width:o.width,height:o.height}),o.canvas||(o.canvas={width:o.width,height:o.height}),y.width=o.canvas.width||320,y.height=o.canvas.height||240,u=y.getContext("2d"),o.video&&o.video instanceof HTMLVideoElement?(d=o.video.cloneNode(),o.initCallback&&o.initCallback()):(d=document.createElement("video"),R(e,d),d.onloadedmetadata=function(){o.initCallback&&o.initCallback()},d.width=o.video.width,d.height=o.video.height),d.muted=!0,d.play(),s=(new Date).getTime(),c=new D.Video,o.disableLogs||(console.log("canvas resolutions",y.width,"*",y.height),console.log("video width/height",d.width||y.width,"*",d.height||y.height)),i(o.frameInterval)}),a=!(this.stop=function(t){t=t||function(){},r=!0;var i=this;setTimeout(function(){n(c.frames,-1,null,null,function(e){c.frames=e,o.advertisement&&o.advertisement.length&&(c.frames=o.advertisement.concat(c.frames)),c.compile(function(e){i.blob=e,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),t&&t(i.blob)})})},10)});function t(){c.frames=[],a=!(r=!0)}this.pause=function(){a=!0},this.resume=function(){a=!1,r&&this.record()},this.clearRecordedData=function(){r||this.stop(t),t()},this.name="WhammyRecorder",this.toString=function(){return this.name};var d,s,c,y=document.createElement("canvas"),u=y.getContext("2d")}void 0!==a?S.AudioContext=a:"undefined"!=typeof webkitAudioContext&&(S.AudioContext=webkitAudioContext),void 0!==m&&(m.Storage=S),void 0!==m&&(m.MediaStreamRecorder=k),void 0!==m&&(m.StereoAudioRecorder=L),void 0!==m&&(m.CanvasRecorder=M),void 0!==m&&(m.WhammyRecorder=A);var D=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function r(e){function c(e,i,t){return[{data:e,id:231}].concat(t.map(function(e){var t=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(127<e.trackNum)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(i)});return i+=e.duration,{data:t,id:163}}))}function u(e){for(var t=[];0<e;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function l(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}var t=new function(e){var t=function(e){if(e[0]){for(var t=e[0].width,i=e[0].height,o=e[0].duration,n=1;n<e.length;n++)o+=e[n].duration;return{duration:o,width:t,height:i}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(e);if(!t)return[];for(var i,o=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(i=t.duration,[].slice.call(new Uint8Array(new Float64Array([i]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],n=0,r=0;n<e.length;){for(var a=[],d=0;a.push(e[n]),d+=e[n].duration,++n<e.length&&d<3e4;);var s={id:524531317,data:c(r,0,a)};o[1].data.push(s),r+=d}return function e(t){for(var i=[],o=0;o<t.length;o++){var n=t[o].data;"object"===h(n)&&(n=e(n)),"number"==typeof n&&(n=l(n.toString(2))),"string"==typeof n&&(n=new Uint8Array(n.split("").map(function(e){return e.charCodeAt(0)})));var r=n.size||n.byteLength||n.length,a=Math.ceil(Math.ceil(Math.log(r)/Math.log(2))/8),d=r.toString(2),s=new Array(7*a+7+1-d.length).join("0")+d,c=new Array(a).join("0")+"1"+s;i.push(u(t[o].id)),i.push(l(c)),i.push(n)}return new Blob(i,{type:"video/webm"})}(o)}(e.map(function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],i=t.indexOf("*"),o=0,n=[];o<4;o++)n[o]=t.charCodeAt(i+3+o);return{width:16383&(n[1]<<8|n[0]),height:16383&(n[3]<<8|n[2]),data:t,riff:e}}(function e(t){for(var i,o=0,n={};o<t.length;){var r=t.substr(o,4),a=(i=o,parseInt(t.substr(i+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t}).join(""),2)),d=t.substr(o+4+4,a);o+=8+a,n[r]=n[r]||[],"RIFF"===r||"LIST"===r?n[r].push(e(d)):n[r].push(d)}return n}(atob(e.image.slice(23))));return t.duration=e.duration,t}));postMessage(t)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(t){var e,i,o,n=(e=r,i=C.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(i),C.revokeObjectURL(i),o);n.onmessage=function(e){e.data.error?console.error(e.data.error):t(e.data)},n.postMessage(this.frames)},{Video:e}}();void 0!==m&&(m.Whammy=D);var U={init:function(){var i=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var o,e=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),t=indexedDB.open(e,1);t.onerror=i.onError,t.onsuccess=function(){((o=t.result).onerror=i.onError,o.setVersion)?1!==o.version?o.setVersion(1).onsuccess=function(){n(o),r()}:r():r()},t.onupgradeneeded=function(e){n(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function n(e){e.createObjectStore(i.dataStoreName)}function r(){var e=o.transaction([i.dataStoreName],"readwrite");function t(t){e.objectStore(i.dataStoreName).get(t).onsuccess=function(e){i.callback&&i.callback(e.target.result,t)}}i.videoBlob&&e.objectStore(i.dataStoreName).put(i.videoBlob,"videoBlob"),i.gifBlob&&e.objectStore(i.dataStoreName).put(i.gifBlob,"gifBlob"),i.audioBlob&&e.objectStore(i.dataStoreName).put(i.audioBlob,"audioBlob"),t("audioBlob"),t("videoBlob"),t("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function x(e,i){if("undefined"==typeof GIFEncoder){var t=document.createElement("script");t.src="https://cdn.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(t)}i=i||{};var o=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&d?(o||(i.width||(i.width=s.offsetWidth||320),i.height||(i.height=s.offsetHeight||240),i.video||(i.video={width:i.width,height:i.height}),i.canvas||(i.canvas={width:i.width,height:i.height}),r.width=i.canvas.width||320,r.height=i.canvas.height||240,s.width=i.video.width||320,s.height=i.video.height||240),(u=new GIFEncoder).setRepeat(0),u.setDelay(i.frameRate||200),u.setQuality(i.quality||10),u.start(),"function"==typeof i.onGifRecordingStarted&&i.onGifRecordingStarted(),Date.now(),l=v(function e(t){if(!0!==f.clearedRecordedData){if(n)return setTimeout(function(){e(t)},100);l=v(e),void 0===h(c)&&(c=t),t-c<90||(!o&&s.paused&&s.play(),o||a.drawImage(s,0,0,r.width,r.height),i.onGifPreview&&i.onGifPreview(r.toDataURL("image/png")),u.addFrame(a),c=t)}}),i.initCallback&&i.initCallback()):setTimeout(f.record,1e3)};var n=!(this.stop=function(e){e=e||function(){},l&&b(l),Date.now(),this.blob=new Blob([new Uint8Array(u.stream().bin)],{type:"image/gif"}),e(this.blob),u.stream().bin=[]});this.pause=function(){n=!0},this.resume=function(){n=!1},this.clearRecordedData=function(){f.clearedRecordedData=!0,u&&(u.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var r=document.createElement("canvas"),a=r.getContext("2d");o&&(e instanceof CanvasRenderingContext2D?r=(a=e).canvas:e instanceof HTMLCanvasElement&&(a=e.getContext("2d"),r=e));var d=!0;if(!o){var s=document.createElement("video");s.muted=!0,s.autoplay=!0,d=!1,s.onloadedmetadata=function(){d=!0},R(e,s),s.play()}var c,u,l=null,f=this}function B(o){var n=[],a=!1,r=document.createElement("canvas"),d=r.getContext("2d");r.style="opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;",(document.body||document.documentElement).appendChild(r),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var s=this,e=window.AudioContext;void 0===e&&("undefined"!=typeof webkitAudioContext&&(e=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(e=mozAudioContext));var t=window.URL;void 0===t&&"undefined"!=typeof webkitURL&&(t=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var i=window.MediaStream;void 0===i&&"undefined"!=typeof webkitMediaStream&&(i=webkitMediaStream),void 0!==i&&void 0===i.prototype.stop&&(i.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})});var c={};function u(){if(!a){var e=n.length,t=!1,i=[];if(n.forEach(function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:i.push(e)}),t)r.width=t.stream.width,r.height=t.stream.height;else if(i.length){r.width=1<e?2*i[0].width:i[0].width;var o=1;3!==e&&4!==e||(o=2),5!==e&&6!==e||(o=3),7!==e&&8!==e||(o=4),9!==e&&10!==e||(o=5),r.height=i[0].height*o}else r.width=s.width||360,r.height=s.height||240;t&&t instanceof HTMLVideoElement&&l(t),i.forEach(function(e,t){l(e,t)}),setTimeout(u,s.frameInterval)}}function l(e,t){if(!a){var i=0,o=0,n=e.width,r=e.height;1===t&&(i=e.width),2===t&&(o=e.height),3===t&&(i=e.width,o=e.height),4===t&&(o=2*e.height),5===t&&(i=e.width,o=2*e.height),6===t&&(o=3*e.height),7===t&&(i=e.width,o=3*e.height),void 0!==e.stream.left&&(i=e.stream.left),void 0!==e.stream.top&&(o=e.stream.top),void 0!==e.stream.width&&(n=e.stream.width),void 0!==e.stream.height&&(r=e.stream.height),d.drawImage(e,i,o,n,r),"function"==typeof e.stream.onRender&&e.stream.onRender(d,i,o,n,r,t)}}function f(e){var t,i,o=document.createElement("video");return t=e,"srcObject"in(i=o)?i.srcObject=t:"mozSrcObject"in i?i.mozSrcObject=t:i.srcObject=t,o.muted=!0,o.volume=0,o.width=e.width||s.width||360,o.height=e.height||s.height||240,o.play(),o}function h(e){n=[],(e=e||o).forEach(function(e){if(e.getTracks().filter(function(e){return"video"===e.kind}).length){var t=f(e);t.stream=e,n.push(t)}})}void 0!==e?c.AudioContext=e:"undefined"!=typeof webkitAudioContext&&(c.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){u()},this.appendStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),o.concat(e),e.forEach(function(e){if(e.getTracks().filter(function(e){return"video"===e.kind}).length){var t=f(e);t.stream=e,n.push(t)}if(e.getTracks().filter(function(e){return"audio"===e.kind}).length&&s.audioContext){var i=s.audioContext.createMediaStreamSource(e);i.connect(s.audioDestination),s.audioSources.push(i)}})},this.releaseStreams=function(){n=[],a=!0,s.gainNode&&(s.gainNode.disconnect(),s.gainNode=null),s.audioSources.length&&(s.audioSources.forEach(function(e){e.disconnect()}),s.audioSources=[]),s.audioDestination&&(s.audioDestination.disconnect(),s.audioDestination=null),s.audioContext&&s.audioContext.close(),s.audioContext=null,d.clearRect(0,0,r.width,r.height),r.stream&&(r.stream.stop(),r.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),h(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){a=!1;var t=function(){var e;h(),"captureStream"in r?e=r.captureStream():"mozCaptureStream"in r?e=r.mozCaptureStream():s.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new i;return e.getTracks().filter(function(e){return"video"===e.kind}).forEach(function(e){t.addTrack(e)}),r.stream=t}(),e=function(){c.AudioContextConstructor||(c.AudioContextConstructor=new c.AudioContext),s.audioContext=c.AudioContextConstructor,s.audioSources=[],!0===s.useGainNode&&(s.gainNode=s.audioContext.createGain(),s.gainNode.connect(s.audioContext.destination),s.gainNode.gain.value=0);var i=0;return o.forEach(function(e){if(e.getTracks().filter(function(e){return"audio"===e.kind}).length){i++;var t=s.audioContext.createMediaStreamSource(e);!0===s.useGainNode&&t.connect(s.gainNode),s.audioSources.push(t)}}),i?(s.audioDestination=s.audioContext.createMediaStreamDestination(),s.audioSources.forEach(function(e){e.connect(s.audioDestination)}),s.audioDestination.stream):void 0}();return e&&e.getTracks().filter(function(e){return"audio"===e.kind}).forEach(function(e){t.addTrack(e)}),o.forEach(function(e){e.fullcanvas}),t}}function O(i,e){i=i||[];var o,n,r=this;(e=e||{mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(e.frameInterval=10),e.video||(e.video={}),e.video.width||(e.video.width=360),e.video.height||(e.video.height=240),this.record=function(){var t;o=new B(i),(t=[],i.forEach(function(e){T(e,"video").forEach(function(e){t.push(e)})}),t).length&&(o.frameInterval=e.frameInterval||10,o.width=e.video.width||360,o.height=e.video.height||240,o.startDrawingFrames()),e.previewStream&&"function"==typeof e.previewStream&&e.previewStream(o.getMixedStream()),(n=new k(o.getMixedStream(),e)).record()},this.stop=function(t){n&&n.stop(function(e){r.blob=e,t(e),r.clearRecordedData()})},this.pause=function(){n&&n.pause()},this.resume=function(){n&&n.resume()},this.clearRecordedData=function(){n&&(n.clearRecordedData(),n=null),o&&(o.releaseStreams(),o=null)},this.addStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),i.concat(e),n&&o&&o.appendStreams(e)},this.resetVideoStreams=function(e){o&&(!e||e instanceof Array||(e=[e]),o.resetVideoStreams(e))},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function I(r,a){var o,n;function d(t,e){if(a.workerPath||e){if(!a.workerPath&&e instanceof ArrayBuffer){var i=new Blob([e],{type:"text/javascript"});a.workerPath=C.createObjectURL(i)}a.workerPath||console.error("workerPath parameter is missing."),(o=new Worker(a.workerPath)).postMessage(a.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),o.addEventListener("message",function(e){"READY"===e.data?(o.postMessage({width:a.width,height:a.height,bitrate:a.bitrate||1200,timebaseDen:a.frameRate||30,realtime:!0}),new ReadableStream({start:function(o){var e=document.createElement("canvas"),n=document.createElement("video");n.srcObject=r,n.onplaying=function(){e.width=a.width,e.height=a.height;var t=e.getContext("2d"),i=1e3/a.frameRate;setTimeout(function e(){t.drawImage(n,0,0),o.enqueue(t.getImageData(0,0,a.width,a.height)),setTimeout(e,i)},i)},n.play()}}).pipeTo(new WritableStream({write:function(e){o&&o.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(n||s.push(e.data))})}else fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(e){e.arrayBuffer().then(function(e){d(t,e)})})}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(a=a||{}).width=a.width||640,a.height=a.height||480,a.frameRate=a.frameRate||30,a.bitrate=a.bitrate||1200,this.record=function(){n=!(s=[]),this.blob=null,d(r),"function"==typeof a.initCallback&&a.initCallback()},this.pause=function(){n=!0},this.resume=function(){n=!1};var s=[];this.stop=function(e){o&&(o.postMessage(null),o.terminate(),o=null),this.blob=new Blob(s,{type:"video/webm"}),e(this.blob)},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){n=!(s=[]),this.blob=null},this.blob=null}void 0!==m&&(m.DiskStorage=U),void 0!==m&&(m.GifRecorder=x),void 0!==m&&(m.MultiStreamRecorder=O),void 0!==m&&(m.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new m(e,t),this.startRecording=function(){return new Promise(function(e,t){try{o.recordRTC.startRecording(),e()}catch(e){t(e)}})},this.stopRecording=function(){return new Promise(function(t,i){try{o.recordRTC.stopRecording(function(e){o.blob=o.recordRTC.getBlob(),o.blob&&o.blob.size?t(e):i("Empty blob.",o.blob)})}catch(e){i(e)}})},this.getDataURL=function(e){return new Promise(function(t,i){try{o.recordRTC.getDataURL(function(e){t(e)})}catch(e){i(e)}})},this.getBlob=function(){return new Promise(function(e,t){try{e(o.recordRTC.getBlob())}catch(e){t(e)}})},this.blob=null}),void 0!==m&&(m.WebAssemblyRecorder=I)}).call(this,e(20),e(56))},423:function(e,t,i){"use strict";var o=i(387);i.n(o).a},424:function(e,t,i){(e.exports=i(14)(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},437:function(e,t,i){"use strict";i.r(t);var o=i(422),n=i.n(o),r={data:function(){return{video:null,videoStart:!1,recorder:null}},created:function(){},mounted:function(){this.video=document.querySelector("video")},methods:{captureCamera:function(t){var i=this;navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(e){t(e)}).catch(function(e){i.$message.error("未找到视频设备")})},stopRecordingCallback:function(){this.video.src=this.video.srcObject=null,this.video.muted=!1,this.video.volume=1,this.video.src=URL.createObjectURL(this.recorder.getBlob()),window.open(URL.createObjectURL(this.recorder.getBlob())),this.recorder.camera.stop(),this.recorder.destroy(),this.recorder=null},startRecording:function(){var t=this;console.log(this.video),this.videoStart=!0,this.captureCamera(function(e){t.video.muted=!0,t.video.volume=0,t.video.srcObject=e,t.recorder=n()(e,{type:"video"}),t.recorder.startRecording(),t.recorder.camera=e})},stopRecording:function(){this.videoStart=!1,this.recorder.stopRecording(this.stopRecordingCallback)}}},a=(i(423),i(19)),d=Object(a.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"record-page"},[i("div",{staticStyle:{"margin-bottom":"15px"}},[i("el-button",{attrs:{disabled:e.videoStart,size:"small"},on:{click:e.startRecording}},[e._v("start recording")]),e._v(" "),i("el-button",{attrs:{disabled:!e.videoStart,size:"small"},on:{click:e.stopRecording}},[e._v("stop recording")])],1),e._v(" "),i("video",{ref:"video",attrs:{controls:"",autoplay:"",playsinline:""}})])},[],!1,null,"32e61de5",null);d.options.__file="record.vue";t.default=d.exports}}]);